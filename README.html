

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Overview &mdash; icon-api  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="REST API OpenAPI Docs" href="rest-api.html" />
    <link rel="prev" title="Welcome to icon-api’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> icon-api
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Readme:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="#endpoints">Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="#containers">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="#development">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest-api.html">REST API OpenAPI Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="registration-rest-api.html">Event Registration REST API OpenAPI Docs</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TUTORIAL.html">Using ICON API</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">icon-api</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/README.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p align="center">
  <h3 align="center">ICON API</h3>  <p align="center">
    API microservice stack for the ICON Blockchain.
    <br />
</p><div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>Includes containers to run an event based architecture on Kafka with websockets, REST, and GraphQl API endpoints for blocks, transactions, and event logs.  Includes a REST API to register filtered events and broadcast them to a configurable set of middleware similar to <a class="reference external" href="https://github.com/eventeum/eventeum">eventeum</a>.</p>
<p>The stack is modular and can be adopted in whole or in part by disabling various services in the stack.  Each process relies on <a class="reference external" href="https://github.com/blockchain-etl/icon-etl">icon-etl</a> to stream data into Kafka from which APIs are built on top of.  For historical queries, data is moved by means of Kafka Connect into MongoDB from which REST and GraphQL endpoints are exposed.
For websockets, data is streamed directly from kafka.  The services are deployed with docker-compose and exposed over a <a class="reference external" href="https://doc.traefik.io/traefik/">Traefik</a> reverse proxy.</p>
<p>Documentation is available <a class="reference external" href="https://geometry-labs.github.io/icon-api/">here</a>.</p>
</div>
<div class="section" id="endpoints">
<h1>Endpoints<a class="headerlink" href="#endpoints" title="Permalink to this headline">¶</a></h1>
<p>| Name | Endpoint Prefix |  Docs |
| :— | :— | :— |<br />| REST API | /api/v1/ | /api/v1/docs |
| Registration API | /api/v1/admin | /api/v1/admin/docs |</p>
</div>
<div class="section" id="containers">
<h1>Containers<a class="headerlink" href="#containers" title="Permalink to this headline">¶</a></h1>
<p>| Name | Description |
| :— | :———- |
| <a class="reference external" href="https://github.com/geometry-labs/icon-etl">etl</a> | Icon etl to scan the blockchain and pipe data to kafka brokers |
| <a class="reference external" href="https://github.com/geometry-labs/icon-filter-registration">registration</a> | Rest api to register contracts and transactions to track |
| <a class="reference external" href="https://github.com/geometry-labs/icon-kafka-worker">filter-worker-contract</a> | Filter worker for contracts |
| <a class="reference external" href="https://github.com/geometry-labs/icon-kafka-worker">filter-worker-transaction</a> | Filter worker for transactions |
| <a class="reference external" href="https://github.com/geometry-labs/icon-rest-api">rest-api</a> | Rest api to retrieve historical icon blockchain data |
| <a class="reference external" href="https://github.com/geometry-labs/kafka-websocket-server">kafka-websocket-server</a> | Websocket server to stream live data for blocks, transactions, and contract logs |
| <a class="reference external" href="https://github.com/geometry-labs/kafka-topics-init">kafka-topic-init</a> | Kafka topic initialization container, exit 0 after completion |
| <a class="reference external" href="https://github.com/geometry-labs/kafka-connect-init">kafka-connect-init</a> | Kafka contract initialization container, exit 0 after completion |</p>
</div>
<div class="section" id="requirements">
<h1>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h1>
<p>Minimum:</p>
<ul class="simple">
<li><p>docker</p></li>
<li><p>docker-compose</p></li>
</ul>
<p>For development :</p>
<ul class="simple">
<li><p>python3</p></li>
<li><p><a class="reference external" href="https://github.com/geometry-labs/tackle-box">tackle-box</a> - <code class="docutils literal notranslate"><span class="pre">pip3</span> <span class="pre">install</span> <span class="pre">tackle-box</span></code></p></li>
<li><p>Go (Only for certain services)</p></li>
</ul>
</div>
<div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>To run the entire stack, simply run.</p>
<div class="highlight-shell script notranslate"><div class="highlight"><pre><span></span>docker-compose up -d
</pre></div>
</div>
</div>
<div class="section" id="development">
<h1>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h1>
<p>This repo is actually a meta-repo consisting of many sub-repos. To pull all the source code into the project, run:</p>
<div class="highlight-shell script notranslate"><div class="highlight"><pre><span></span>pip3 install tackle-box 
tackle . --context-file repos.yaml --no-input 
</pre></div>
</div>
<p>To run the development version, run the docker-compose with the <code class="docutils literal notranslate"><span class="pre">docker-compose.dev.yml</span></code> to override the images with local builds of the containers like so.</p>
<div class="highlight-shell script notranslate"><div class="highlight"><pre><span></span>docker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d 
</pre></div>
</div>
<p>Each service has unit tests embedded into their build pipelines with integration tests run from this repo in the <code class="docutils literal notranslate"><span class="pre">tests</span></code> directory. To run integration tests, run the stack and then run the tests separately.</p>
<div class="highlight-shell script notranslate"><div class="highlight"><pre><span></span>pip install -r requirements_dev.txt 
python -m pytest tests
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="rest-api.html" class="btn btn-neutral float-right" title="REST API OpenAPI Docs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to icon-api’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Geometry Labs, Inc..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>